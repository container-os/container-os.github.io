{{ define "header" }}
  {{ $featured_image := .Param "featured_image" | default "images/pexels-photo-707667.jpg" }}
  {{ $featured_image := (trim $featured_image "/") | absURL }}
  <header class="cover bg-top" style="background-image: url('{{ $featured_image }}');">
    <div class="bg-black-60">
      {{ partial "site-navigation.html" .}}

      {{ with .Site.GetPage "page" "about.md"}}
      <div class="tc-l pv4 pv6-l ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
            {{ . }}
          </h2>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </header>
{{ end }}

{{ define "main" }}
  {{ with .Site.GetPage "page" "about.md"}}
  <article class="cf ph10 ph5-l pv3 pv4-l f4 tc-l measure-wide lh-copy mid-gray">
    {{ .Summary }}
  </article>
  {{ end }}

  {{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
  {{ $mainSections := .Site.Params.mainSections | default (slice "post") }}
  {{/* Create a variable with that section to use in multiple places. */}}
  {{ $section := where .Site.RegularPages "Section" "in" $mainSections }}
  {{/* Check to see if the section is defined for ranging through it */}}
  {{ $section_count := len $section }}
  {{ if ge $section_count 1 }}
    {{/* Derive the section name  */}}
    {{ $section_name := index (.Site.Params.mainSections) 0 }}

    <div class="pa3 pa4-ns w-100 w-70-ns">
    {{ with .Site.GetPage "section" "posts" }}
      {{ range .Paginator.Pages }}
      <div class="relative w-100 mb4">
        {{ partial "summary-with-image.html" . }}
      </div>
      {{ end }}
    {{ end }}
    </div>
  {{ end }}

{{ end }}
